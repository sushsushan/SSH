#!/bin/bash
echo "1) System-generated DB name/user  2) Enter your own DB name/user"; read -p "Choose (1/2): " choice && HOST_USER=$(whoami) && if [[ "$choice" == "1" ]]; then DB_NAME="db_$(date +%s)" && DB_USER="${HOST_USER}_${DB_NAME}"; else read -p "Enter DB name: " DB_NAME && DB_USER="${HOST_USER}_$DB_NAME"; fi && DB_PASS=$(openssl rand -base64 12) && FULL_DB_NAME="${HOST_USER}_${DB_NAME}" && echo "Creating database..." && uapi Mysql create_database name="$FULL_DB_NAME" >/dev/null 2>&1 && echo "Creating user..." && uapi Mysql create_user name="$DB_USER" password="$DB_PASS" >/dev/null 2>&1 && echo "Setting privileges..." && uapi Mysql set_privileges_on_database database="$FULL_DB_NAME" user="$DB_USER" privileges="ALL PRIVILEGES" >/dev/null 2>&1 && echo -e "Database: $FULL_DB_NAME\nUser: $DB_USER\nPassword: $DB_PASS"
